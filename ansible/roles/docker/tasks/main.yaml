---
# tasks file for docker
- name: Add Docker CE repo
  get_url:
    url: https://download.docker.com/linux/centos/docker-ce.repo
    dest: /etc/yum.repos.d/docker-ce.repo

- name: Install Docker CE with --nobest
  shell: dnf install -y docker-ce --nobest
  args:
    warn: false
  register: docker_install
  changed_when: "'Complete!' in docker_install.stdout"


- name: Docker config
  template:
    src: daemon.json.j2
    dest: /etc/docker/daemon.json
  notify:
  - start